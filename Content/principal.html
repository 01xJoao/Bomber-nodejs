<!DOCTYPE html>
<html>
<script src="/socket.io/socket.io.js"></script>
<script src="jquery.min.js" type="text/javascript"></script>
<link rel="stylesheet" type="text/css" href="style.css">
<body style="overflow:hidden ">

   <div id="mensagens" style="color:#FFF"></div>
  <div style="position: relative; width:70%; min-width:1000px; float:left;">
<div style="width: 1200px; height:720px; margin-left: auto; position:relative; background:url('background.png');background-size:cover; height:700px;">
  <section class="grid">
  			  	<div class="container">

  					<div class="grid-row">
  						<div class="block grids" id="0_0"></div>
  						<div class="block grids" id="0_1"></div>
  						<div class="block grids" id="0_2"></div>
  						<div class="block grids" id="0_3"></div>
  						<div class="block grids" id="0_4"></div>
  						<div class="block grids" id="0_5"></div>
  						<div class="block grids" id="0_6"></div>
  						<div class="block grids" id="0_7"></div>
  						<div class="block grids" id="0_8"></div>
  						<div class="block grids" id="0_9"></div>
  						<div class="block grids" id="0_10"></div>
  					</div>

  					<div class="grid-row">
  						<div class="block grids" id="1_0"></div>
  						<div class="block grids" id="1_1"></div>
  						<div class="block grids" id="1_2"></div>
  						<div class="block grids" id="1_3"></div>
  						<div class="block grids" id="1_4"></div>
  						<div class="block grids" id="1_5"></div>
  						<div class="block grids" id="1_6"></div>
  						<div class="block grids" id="1_7"></div>
  						<div class="block grids" id="1_8"></div>
  						<div class="block grids" id="1_9"></div>
  						<div class="block grids" id="1_10"></div>
  					 </div>

            <div class="grid-row">
  						<div class="block grids" id="2_0"></div>
  						<div class="block grids" id="2_1"></div>
  						<div class="block grids" id="2_2"></div>
  						<div class="block grids" id="2_3"></div> 
  						<div class="block grids" id="2_4"></div>
  						<div class="block grids" id="2_5"></div>
  						<div class="block grids" id="2_6"></div>
  						<div class="block grids" id="2_7"></div>
  						<div class="block grids" id="2_8"></div>
  						<div class="block grids" id="2_9"></div>
  						<div class="block grids" id="2_10"></div>
  					</div>

            <div class="grid-row">
  						<div class="block grids" id="3_0"></div>
  						<div class="block grids" id="3_1"></div>
  						<div class="block grids" id="3_2"></div>
  						<div class="block grids" id="3_3"></div>
  						<div class="block grids" id="3_4"></div>
  						<div class="block grids" id="3_5"></div>
  						<div class="block grids" id="3_6"></div>
  						<div class="block grids" id="3_7"></div>
  						<div class="block grids" id="3_8"></div>
  						<div class="block grids" id="3_9"></div>
  						<div class="block grids" id="3_10"></div>
  					</div>

            <div class="grid-row">
  						<div class="block grids" id="4_0"></div>
  						<div class="block grids" id="4_1"></div>
  						<div class="block grids" id="4_2"></div>
  						<div class="block grids" id="4_3"></div>
  						<div class="block grids" id="4_4"></div>
  						<div class="block grids" id="4_5"></div>
  						<div class="block grids" id="4_6"></div>
  						<div class="block grids" id="4_7"></div>
  						<div class="block grids" id="4_8"></div>
  						<div class="block grids" id="4_9"></div>
  						<div class="block grids" id="4_10"></div>
  					</div>

            <div class="grid-row">
  						<div class="block grids" id="5_0"></div>
  						<div class="block grids" id="5_1"></div>
  						<div class="block grids" id="5_2"></div>
  						<div class="block grids" id="5_3"></div>
  						<div class="block grids" id="5_4"></div>
  						<div class="block grids" id="5_5"></div>
  						<div class="block grids" id="5_6"></div>
  						<div class="block grids" id="5_7"></div>
  						<div class="block grids" id="5_8"></div>
  						<div class="block grids" id="5_9"></div>
  						<div class="block grids" id="5_10"></div>
  					</div>

            <div class="grid-row">
  						<div class="block grids" id="6_0"></div>
  						<div class="block grids" id="6_1"></div>
  						<div class="block grids" id="6_2"></div>
  						<div class="block grids" id="6_3"></div>
  						<div class="block grids" id="6_4"></div>
  						<div class="block grids" id="6_5"></div>
  						<div class="block grids" id="6_6"></div>
  						<div class="block grids" id="6_7"></div>
  						<div class="block grids" id="6_8"></div>
  						<div class="block grids" id="6_9"></div>
  						<div class="block grids" id="6_10"></div>
  					</div>

            <div class="grid-row">
  						<div class="block grids" id="7_0"></div>
  						<div class="block grids" id="7_1"></div>
  						<div class="block grids" id="7_2"></div>
  						<div class="block grids" id="7_3"></div>
  						<div class="block grids" id="7_4"></div>
  						<div class="block grids" id="7_5"></div>
  						<div class="block grids" id="7_6"></div>
  						<div class="block grids" id="7_7"></div>
  						<div class="block grids" id="7_8"></div>
  						<div class="block grids" id="7_9"></div>
  						<div class="block grids" id="7_10"></div>
  					</div>

            <div class="grid-row">
  						<div class="block grids" id="8_0"></div>
  						<div class="block grids" id="8_1"></div>
  						<div class="block grids" id="8_2"></div>
  						<div class="block grids" id="8_3"></div>
  						<div class="block grids" id="8_4"></div>
  						<div class="block grids" id="8_5"></div>
  						<div class="block grids" id="8_6"></div>
  						<div class="block grids" id="8_7"></div>
  						<div class="block grids" id="8_8"></div>
  						<div class="block grids" id="8_9"></div>
  						<div class="block grids" id="8_10"></div>
  					</div>

            <div class="grid-row">
  						<div class="block grids" id="9_0"></div>
  						<div class="block grids" id="9_1"></div>
  						<div class="block grids" id="9_2"></div>
  						<div class="block grids" id="9_3"></div>
  						<div class="block grids" id="9_4"></div>
  						<div class="block grids" id="9_5"></div>
  						<div class="block grids" id="9_6"></div>
  						<div class="block grids" id="9_7"></div>
  						<div class="block grids" id="9_8"></div>
  						<div class="block grids" id="9_9"></div>
  						<div class="block grids" id="9_10"></div>
  					</div>

          	<div class="grid-row">
  						<div class="block grids" id="10_0"></div>
  						<div class="block grids" id="10_1"></div>
  						<div class="block grids" id="10_2"></div>
  						<div class="block grids" id="10_3"></div>
  						<div class="block grids" id="10_4"></div>
  						<div class="block grids" id="10_5"></div>
  						<div class="block grids" id="10_6"></div>
  						<div class="block grids" id="10_7"></div>
  						<div class="block grids" id="10_8"></div>
  						<div class="block grids" id="10_9"></div>
  						<div class="block grids" id="10_10"></div>
  					</div>
      </div>
</section>
<div class="personagem" id="J1">
    <div class="cubo"></div>
</div>
<div class="personagem2" id="J2">
    <div class="cubo2"></div>
</div>
<div class="personagem3" id="J3">
    <div class="cubo3"></div>
</div>
<div class="personagem4" id="J4">
    <div class="cubo4"></div>
</div>

</div>

</div>
<div id="Info">
<div style="font-size:24px; padding-left:10px; padding-top:10px; padding-bot:10px; height:30px; background:#CCC">Info</div>
<div id="Info2" style="padding-left: 10px;"></div>
</div>


<script type="text/javascript">
  var divmsg = document.getElementById('mensagens');
  var socket = io.connect();  //Liga ao node.js por websocket | do outro lado chega uma mensagem chamada connection

// Blocos Ã  volta

  $('#0_0').css('background','url(stripes.png)');
  $('#0_1').css('background','url(stripes.png)');
  $('#0_2').css('background','url(stripes.png)');
  $('#0_3').css('background','url(stripes.png)');
  $('#0_4').css('background','url(stripes.png)');
  $('#0_5').css('background','url(stripes.png)');
  $('#0_6').css('background','url(stripes.png)');
  $('#0_7').css('background','url(stripes.png)');
  $('#0_8').css('background','url(stripes.png)');
  $('#0_9').css('background','url(stripes.png)');
  $('#0_10').css('background','url(stripes.png)');

  $('#1_0').css('background','url(stripes.png)');
  $('#2_0').css('background','url(stripes.png)');
  $('#3_0').css('background','url(stripes.png)');
  $('#4_0').css('background','url(stripes.png)');
  $('#5_0').css('background','url(stripes.png)');
  $('#6_0').css('background','url(stripes.png)');
  $('#7_0').css('background','url(stripes.png)');
  $('#8_0').css('background','url(stripes.png)');
  $('#9_0').css('background','url(stripes.png)');

  $('#1_10').css('background','url(stripes.png)');
  $('#2_10').css('background','url(stripes.png)');
  $('#3_10').css('background','url(stripes.png)');
  $('#4_10').css('background','url(stripes.png)');
  $('#5_10').css('background','url(stripes.png)');
  $('#6_10').css('background','url(stripes.png)');
  $('#7_10').css('background','url(stripes.png)');
  $('#8_10').css('background','url(stripes.png)');
  $('#9_10').css('background','url(stripes.png)');

  $('#10_0').css('background','url(stripes.png)');
  $('#10_1').css('background','url(stripes.png)');
  $('#10_2').css('background','url(stripes.png)');
  $('#10_3').css('background','url(stripes.png)');
  $('#10_4').css('background','url(stripes.png)');
  $('#10_5').css('background','url(stripes.png)');
  $('#10_6').css('background','url(stripes.png)');
  $('#10_7').css('background','url(stripes.png)');
  $('#10_8').css('background','url(stripes.png)');
  $('#10_9').css('background','url(stripes.png)');
  $('#10_10').css('background','url(stripes.png)');


// Blocos pilares

$('#2_2').css('background','url(stripes.png)');
$('#2_4').css('background','url(stripes.png)');
$('#2_6').css('background','url(stripes.png)');
$('#2_8').css('background','url(stripes.png)');
$('#4_2').css('background','url(stripes.png)');
$('#4_4').css('background','url(stripes.png)');
$('#4_6').css('background','url(stripes.png)');
$('#4_8').css('background','url(stripes.png)');
$('#6_2').css('background','url(stripes.png)');
$('#6_4').css('background','url(stripes.png)');
$('#6_6').css('background','url(stripes.png)');
$('#6_8').css('background','url(stripes.png)');
$('#8_2').css('background','url(stripes.png)');
$('#8_4').css('background','url(stripes.png)');
$('#8_6').css('background','url(stripes.png)');
$('#8_8').css('background','url(stripes.png)');
var countries = new Array();
var cList = $('#Info2')
 $(document).ready(function(button){
	$("#J1").hide();
	$("#J1").css( 'left','65px');
    $("#J1").css('top','65px');
	$("#J2").hide();
	$("#J2").css( 'left','565px');
    $("#J2").css('top','565px');
	$("#J3").hide();
	$("#J3").css( 'left','565px');
    $("#J3").css('top','65px');
	$("#J4").hide();
	$("#J4").css( 'left','65px');
    $("#J4").css('top','565px');
  });
  var socket = io.connect();  //Liga ao node.js por websocket | do outro lado chega uma mensagem chamada connection

socket.on("Info", function (msg) {	
	$("#Info2").html('');
	countries.push(msg);
	if(countries.length>=5){
		countries.splice(5,1);
	}
	lista();
});
socket.on("Begin", function (msg) {	
	StartGame(msg);
});
socket.on("Win", function (msg) {	
	//alert("Ganhou o " + msg);
});
socket.on("SetBomba", function (msg3) {
	$("#"+msg3).html();
	$("#"+msg3).html('<img  src="bombasimples.gif" class="bomba" />');
	//$("#"+msg).innerHTML = '<img  src="bombasimples.gif" class="bomba" />';
});
function LimpaGrid(){
	for(var i=0; i<10; i++){
		for(var k=0; k<10; k++){
			$("#"+i+"_"+k).html('');
		}
	}
}
socket.on("RBomba", function (msg1) {
	console.log("RemoveBomba: " + msg1);
	$("#"+msg1).html();
	//$("#"+msg).innerHTML = '<img  src="bombasimples.gif" class="bomba" />';
});
socket.on("Dead", function (msg6) {	
	$("#"+msg6).hide();
	//alert("Morreu: " + msg);
	});
	function StartGame(msg){
	countries=[];
	lista();
		LimpaGrid();
		$("#J1").hide();
		$("#J1").css( 'left','65px');
		$("#J1").css('top','65px');
		$("#J2").hide();
		$("#J2").css( 'left','565px');
		$("#J2").css('top','565px');
		$("#J3").hide();
		$("#J3").css( 'left','565px');
		$("#J3").css('top','65px');
		$("#J4").hide();
		$("#J4").css( 'left','65px');
		$("#J4").css('top','565px');
		$("#J1").show();
		$("#J2").show();
	if(msg>=3){
		$("#J3").show();
	}
	if(msg>=4){
		$("#J4").show();
	}
}
socket.on("Array", function (msg2) {
	for(i=0; i<=msg2.length; i++){
		$("#"+msg2[i]).html('');
		$("#"+msg2[i]).html('<img  src="fogo.png" class="bomba" />');
	}
	var temp= setInterval(function() { RemoveFogo(msg2, temp);}, 1000);
});
function RemoveFogo(msg4, temp){
	for(i=0; i<=msg4.length; i++){
		$("#"+msg4[i]).html('');
	}
	clearInterval(temp);
}
function lista(){
	$.each(countries, function(i)
	{
		var li = $('<li/>')
			.addClass('ui-menu-item')
			.attr('role', 'menuitem')
			.appendTo(cList);
		var aaa = $('<a/>')
			.addClass('ui-all')
			.text(countries[i])
			.appendTo(li);
	});
	}
socket.on("mensagem", function (msg5) {	
    if( msg5.Move == "Cima")
    $('#'+msg5.Jogador).animate({
      top: '-=60'
    }, 100);

    if( msg5.Move == "Baixo")
    $('#'+msg5.Jogador).animate({
      top: '+=60'
    }, 100); 

    if( msg5.Move == "Esquerda")
    $('#'+msg5.Jogador).animate({ 
      left: '-=60'
    }, 100);
 
      if( msg5.Move == "Direita") 
      $('#'+msg5.Jogador).animate({
        left: '+=60'
    }, 100);
});

</script>

</body>
</html>
